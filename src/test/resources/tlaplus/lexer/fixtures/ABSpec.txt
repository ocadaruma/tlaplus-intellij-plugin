COMMENT ('Taken from https://lamport.azurewebsites.net/video/ABSpec.tla\n')
MODULE_BEGIN ('------------------------------ MODULE')
WHITE_SPACE (' ')
identifier ('ABSpec')
WHITE_SPACE (' ')
---- ('--------------------------------')
WHITE_SPACE ('\n')
EXTENDS ('EXTENDS')
WHITE_SPACE (' ')
identifier ('Integers')
WHITE_SPACE ('\n\n')
CONSTANT ('CONSTANT')
WHITE_SPACE (' ')
identifier ('Data')
WHITE_SPACE ('  ')
COMMENT ('\* The set of all possible data values.')
WHITE_SPACE ('\n\n')
VARIABLES ('VARIABLES')
WHITE_SPACE (' ')
identifier ('AVar')
, (',')
WHITE_SPACE ('   ')
COMMENT ('\* The last <<value, bit>> pair A decided to send.')
WHITE_SPACE ('\n          ')
identifier ('BVar')
WHITE_SPACE ('    ')
COMMENT ('\* The last <<value, bit>> pair B received.')
WHITE_SPACE ('\n\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
COMMENT ('(* Type correctness means that AVar and BVar are tuples <<d, i>> where     *)')
WHITE_SPACE ('\n')
COMMENT ('(* d \in Data and i \in {0, 1}.                                            *)')
WHITE_SPACE ('\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
identifier ('TypeOK')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
JUNCTION_BEGIN ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('AVar')
WHITE_SPACE (' ')
\in ('\in')
WHITE_SPACE (' ')
identifier ('Data')
WHITE_SPACE (' ')
\X ('\X')
WHITE_SPACE (' ')
{ ('{')
number ('0')
, (',')
number ('1')
} ('}')
WHITE_SPACE ('\n          ')
JUNCTION_CONT ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('BVar')
WHITE_SPACE (' ')
\in ('\in')
WHITE_SPACE (' ')
identifier ('Data')
WHITE_SPACE (' ')
\X ('\X')
WHITE_SPACE (' ')
{ ('{')
number ('0')
, (',')
number ('1')
} ('}')
WHITE_SPACE ('\n\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
COMMENT ('(* It's useful to define vars to be the tuple of all variables, for        *)')
WHITE_SPACE ('\n')
COMMENT ('(* example so we can write [Next]_vars instead of [Next]_<< ...  >>        *)')
WHITE_SPACE ('\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
JUNCTION_BREAK ('')
identifier ('vars')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
<< ('<<')
WHITE_SPACE (' ')
identifier ('AVar')
, (',')
WHITE_SPACE (' ')
identifier ('BVar')
WHITE_SPACE (' ')
>> ('>>')
WHITE_SPACE ('\n\n\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
COMMENT ('(* Initially AVar can equal <<d, 1>> for any Data value d, and BVar equals *)')
WHITE_SPACE ('\n')
COMMENT ('(* AVar.                                                                   *)')
WHITE_SPACE ('\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
identifier ('Init')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
JUNCTION_BEGIN ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('AVar')
WHITE_SPACE (' ')
\in ('\in')
WHITE_SPACE (' ')
identifier ('Data')
WHITE_SPACE (' ')
\X ('\X')
WHITE_SPACE (' ')
{ ('{')
number ('1')
} ('}')
WHITE_SPACE ('\n        ')
JUNCTION_CONT ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('BVar')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
identifier ('AVar')
WHITE_SPACE ('\n\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
COMMENT ('(* When AVar = BVar, the sender can "send" an arbitrary data d item by     *)')
WHITE_SPACE ('\n')
COMMENT ('(* setting AVar[1] to d and complementing AVar[2].  It then waits until    *)')
WHITE_SPACE ('\n')
COMMENT ('(* the receiver "receives" the message by setting BVar to AVar before it   *)')
WHITE_SPACE ('\n')
COMMENT ('(* can send its next message.  Sending is described by action A and        *)')
WHITE_SPACE ('\n')
COMMENT ('(* receiving by action B.                                                  *)')
WHITE_SPACE ('\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
JUNCTION_BREAK ('')
identifier ('A')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
JUNCTION_BEGIN ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('AVar')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
identifier ('BVar')
WHITE_SPACE ('\n     ')
JUNCTION_CONT ('')
/\ ('/\')
WHITE_SPACE (' ')
\E ('\E')
WHITE_SPACE (' ')
identifier ('d')
WHITE_SPACE (' ')
\in ('\in')
WHITE_SPACE (' ')
identifier ('Data')
: (':')
WHITE_SPACE (' ')
identifier ('AVar')
' (''')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
<< ('<<')
identifier ('d')
, (',')
WHITE_SPACE (' ')
number ('1')
WHITE_SPACE (' ')
- ('-')
WHITE_SPACE (' ')
identifier ('AVar')
[ ('[')
number ('2')
] (']')
>> ('>>')
WHITE_SPACE ('\n     ')
JUNCTION_CONT ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('BVar')
' (''')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
identifier ('BVar')
WHITE_SPACE ('\n\n')
JUNCTION_BREAK ('')
identifier ('B')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
JUNCTION_BEGIN ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('AVar')
WHITE_SPACE (' ')
/= ('#')
WHITE_SPACE (' ')
identifier ('BVar')
WHITE_SPACE ('\n     ')
JUNCTION_CONT ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('BVar')
' (''')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
identifier ('AVar')
WHITE_SPACE ('\n     ')
JUNCTION_CONT ('')
/\ ('/\')
WHITE_SPACE (' ')
identifier ('AVar')
' (''')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
identifier ('AVar')
WHITE_SPACE ('\n\n')
JUNCTION_BREAK ('')
identifier ('Next')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
identifier ('A')
WHITE_SPACE (' ')
JUNCTION_BEGIN ('')
\/ ('\/')
WHITE_SPACE (' ')
identifier ('B')
WHITE_SPACE ('\n\n')
JUNCTION_BREAK ('')
identifier ('Spec')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
identifier ('Init')
WHITE_SPACE (' ')
JUNCTION_BEGIN ('')
/\ ('/\')
WHITE_SPACE (' ')
[] ('[]')
[ ('[')
identifier ('Next')
]_ (']_')
identifier ('vars')
WHITE_SPACE ('\n\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
COMMENT ('(* For understanding the spec, it's useful to define formulas that should  *)')
WHITE_SPACE ('\n')
COMMENT ('(* be invariants and check that they are invariant.  The following         *)')
WHITE_SPACE ('\n')
COMMENT ('(* invariant Inv asserts that, if AVar and BVar have equal second          *)')
WHITE_SPACE ('\n')
COMMENT ('(* components, then they are equal (which by the invariance of TypeOK      *)')
WHITE_SPACE ('\n')
COMMENT ('(* implies that they have equal first components).                         *)')
WHITE_SPACE ('\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
JUNCTION_BREAK ('')
identifier ('Inv')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
( ('(')
identifier ('AVar')
[ ('[')
number ('2')
] (']')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
identifier ('BVar')
[ ('[')
number ('2')
] (']')
) (')')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
( ('(')
identifier ('AVar')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
identifier ('BVar')
) (')')
WHITE_SPACE ('\n')
---- ('-----------------------------------------------------------------------------')
WHITE_SPACE ('\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
COMMENT ('(* FairSpec is Spec with the addition requirement that it keeps taking     *)')
WHITE_SPACE ('\n')
COMMENT ('(* steps.                                                                  *)')
WHITE_SPACE ('\n')
COMMENT ('(***************************************************************************)')
WHITE_SPACE ('\n')
identifier ('FairSpec')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
identifier ('Spec')
WHITE_SPACE (' ')
JUNCTION_BEGIN ('')
/\ ('/\')
WHITE_SPACE (' ')
WF_ ('WF_')
identifier ('vars')
( ('(')
identifier ('Next')
) (')')
WHITE_SPACE ('\n')
JUNCTION_BREAK ('')
==== ('=============================================================================')
COMMENT ('\n\* Modification History\n\* Last modified Wed Oct 18 04:07:37 PDT 2017 by lamport\n\* Created Fri Sep 04 07:08:22 PDT 2015 by lamport')
